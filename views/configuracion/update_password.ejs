<%- include('../includes/head.ejs', { permisos: permisos, rol: rol }) %>

    <% if (verificar) { %>

        <body>
            <section class="section">
                <div class="container">
                    <h3 id="title" class="title">Ingresa tu antigua contraseña</h3>
                    <form action="/configuracion/verify_password" method="POST">
                        <input type="hidden" name="_csrf" value="<%= csrfToken %>">

                        <div class="field">
                            <div class="control has-icons-left">
                                <input required class="input" type="password" id="oldPassword" name="oldPassword"
                                style="width: 300px; margin-right: 10px;" />
                                <span class="icon is-small is-left">
                                    <i class="fas fa-lock"></i>
                                </span>
                                <label style="color: black;">
                                    <input type="checkbox" id="toggleOldPassword" name="toggleOldPassword"
                                        style="display:none;">
                                    <i class="fas fa-eye-slash" id="toggleOldPasswordIcon" style="cursor: pointer;"></i>
                                </label>
                            </div>
                        </div>

                        <!-- Botón con espacio adicional debajo -->
                        <button id="guardarBtn" type="submit" class="button is-primary"
                            style="margin-top: 15px;">Verificar contraseña</button>
                    </form>

                </div>

                <% if (error) { %>
                    <div class="notification is-danger" style="width: 300px; display: block; margin-bottom: 10px;">
                        <strong>
                            <%= error %>
                        </strong>
                    </div>
                    <% } %>
            </section>
        </body>
        <% } %>

            <% if (actualizar) { %>

                <body>
                    <section class="section">
                        <div class="container">
                            <h3 id="title" class="title">Ingresa tu nueva contraseña</h3>
                            <form action="/configuracion/update_password" method="POST">
                                <input type="hidden" name="_csrf" value="<%= csrfToken %>">

                                <div class="field">
                                    <div class="control has-icons-left">
                                        <input required class="input" type="password" id="newPassword" name="newPassword"
                                        style="width: 300px; margin-right: 10px;" />
                                        <span class="icon is-small is-left">
                                            <i class="fas fa-lock"></i>
                                        </span>
                                        <label style="color: black;">
                                            <input type="checkbox" id="toggleNewPassword" name="toggleNewPassword"
                                                style="display:none;">
                                            <i class="fas fa-eye-slash" id="toggleNewPasswordIcon" 
                                            style="cursor: pointer;"></i>
                                        </label>
                                    </div>
                                </div>

                                <div class="field">
                                    <div class="control has-icons-left">
                                        <input required class="input" type="password" id="newPassword2" name="newPassword2"
                                        style="width: 300px; margin-right: 10px;" />
                                        <span class="icon is-small is-left">
                                            <i class="fas fa-lock"></i>
                                        </span>
                                        <label style="color: black;">
                                            <input type="checkbox" id="toggleNewPassword2" name="toggleNewPassword2"
                                                style="display:none;">
                                            <i class="fas fa-eye-slash" id="toggleNewPassword2Icon" 
                                            style="cursor: pointer;"></i>
                                        </label>
                                    </div>
                                </div>

                                <!-- Botón debajo de los campos -->
                                <button id="guardarBtn" type="submit" class="button is-primary"
                                    style="margin-top: 15px;">Actualizar contraseña</button>
                            </form>
                            <p id="errorMessage" style="color: red;"></p>
                        </div>
                    </section>
                </body>
                <% } %>

                    <script type="text/javascript" src="/js/updatePassword.js"></script>
                    <%- include('../includes/foot.ejs') %>

                        </html>